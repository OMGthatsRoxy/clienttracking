# 自定义动作管理系统

## 功能概述

自定义动作管理系统允许每个教练用户在课程记录表单中直接添加新的训练动作。教练可以快速添加自定义动作，这些动作会立即保存到数据库中并在动作选择器中显示。

## 主要功能

### 1. 快速添加动作
- **位置**: 课程记录表单中的动作选择下拉菜单
- **功能**: 
  - 显示预设动作和自定义动作
  - 支持快速添加新动作
  - 按身体部位分类显示
  - 添加后立即选择新动作

### 2. 动作分类
支持以下身体部位分类：
- 胸 (chest)
- 背 (back)
- 肩膀 (shoulders)
- 手臂 (arms)
- 臀 (glutes)
- 腿 (legs)
- 全身 (fullbody)

## 使用方法

### 添加自定义动作

1. 打开课程记录表单
2. 选择身体部位分类
3. 在动作选择下拉菜单中点击"+"按钮
4. 在弹出的对话框中输入动作名称
5. 点击"添加"按钮或按回车键
6. 新动作会立即保存并自动选择

### 在课程记录中使用

1. 创建或编辑课程记录
2. 在动作训练部分选择身体部位
3. 在动作选择下拉菜单中：
   - 预设动作显示在"预设动作"分组中
   - 自定义动作显示在"自定义动作"分组中
4. 选择需要的动作
5. 填写重量等训练数据

## 技术实现

### 数据结构

```typescript
interface CustomExercise {
  id: string;
  coachId: string;
  name: string;
  category: 'chest' | 'back' | 'shoulders' | 'arms' | 'glutes' | 'legs' | 'fullbody';
  description?: string;
  notes?: string;
  isActive: boolean;
  createdAt: string;
  updatedAt: string;
}
```

### 主要组件

**ExerciseSelector**: 动作选择器组件
- 结合预设动作和自定义动作
- 支持快速添加新动作
- 实时加载当前教练的自定义动作
- 添加后立即更新显示

### 数据库集合

- **customExercises**: 存储自定义动作数据
  - 按 `coachId` 索引，确保每个教练只能看到自己的动作
  - 按 `category` 和 `isActive` 过滤，提高查询效率

## 权限控制

- 每个教练只能查看、编辑、删除自己的自定义动作
- 使用 Firebase 安全规则确保数据隔离
- 动作选择器只显示当前教练的启用动作

## 用户体验特点

1. **快速添加**: 无需离开当前页面即可添加新动作
2. **即时反馈**: 添加后立即选择新动作
3. **简化流程**: 只需输入动作名称，分类自动确定
4. **键盘支持**: 支持回车键快速添加
5. **实时更新**: 动作列表实时同步

## 注意事项

1. 自定义动作名称在同一教练的同一分类中不能重复
2. 删除动作后，相关的课程记录中的动作名称仍然保留（历史数据）
3. 禁用的动作不会在动作选择器中显示
4. 预设动作不能被编辑或删除，只能使用自定义动作管理功能

## 未来扩展

- 支持动作图片上传
- 支持动作视频链接
- 支持动作难度等级
- 支持动作标签系统
- 支持动作分享功能 