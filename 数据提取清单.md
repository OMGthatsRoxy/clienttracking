# ğŸ“Š å¥èº«æ•™ç»ƒå®¢æˆ·ç®¡ç†ç³»ç»Ÿ - å®Œæ•´æ•°æ®æå–æ¸…å•

## ğŸ—„ï¸ æ•°æ®åº“é›†åˆç»“æ„

### 1. **ç”¨æˆ·è®¤è¯æ•°æ®** (`auth`)
- **ç”¨æˆ·ID** (`uid`)
- **é‚®ç®±** (`email`)
- **æ˜¾ç¤ºåç§°** (`displayName`)
- **åˆ›å»ºæ—¶é—´** (`createdAt`)

### 2. **æ•™ç»ƒä¿¡æ¯** (`coaches`)
```typescript
{
  id: string;                    // æ•™ç»ƒID
  name: string;                  // æ•™ç»ƒå§“å
  email: string;                 // é‚®ç®±
  phone?: string;                // ç”µè¯
  specialization?: string;       // ä¸“ä¸šé¢†åŸŸ
  experience?: number;           // ç»éªŒå¹´é™
  bio?: string;                  // ä¸ªäººç®€ä»‹
  avatar?: string;               // å¤´åƒURL
  createdAt: string;             // åˆ›å»ºæ—¶é—´
  updatedAt: string;             // æ›´æ–°æ—¶é—´
}
```

### 3. **å®¢æˆ·æ•°æ®** (`clients`)
```typescript
{
  id: string;                    // å®¢æˆ·ID
  name: string;                  // å®¢æˆ·å§“å
  phone: string;                 // ç”µè¯
  email: string;                 // é‚®ç®±
  gender: string;                // æ€§åˆ« (male/female/other)
  age: number;                   // å¹´é¾„
  height: number;                // èº«é«˜(cm)
  weight: number;                // ä½“é‡(kg)
  goal: string;                  // å¥èº«ç›®æ ‡
  notes?: string;                // å¤‡æ³¨
  coachId: string;               // æ‰€å±æ•™ç»ƒID
  createdAt: string;             // åˆ›å»ºæ—¶é—´
  updatedAt: string;             // æ›´æ–°æ—¶é—´
}
```

### 4. **æ½œåœ¨å®¢æˆ·æ•°æ®** (`prospects`)
```typescript
{
  id: string;                    // æ½œåœ¨å®¢æˆ·ID
  name: string;                  // å§“å
  phone: string;                 // ç”µè¯
  email?: string;                // é‚®ç®±
  gender: string;                // æ€§åˆ«
  age?: number;                  // å¹´é¾„
  height?: number;               // èº«é«˜
  weight?: number;               // ä½“é‡
  goal?: string;                 // å¥èº«ç›®æ ‡
  notes?: string;                // å¤‡æ³¨
  status: 'new' | 'contacted' | 'interested' | 'converted' | 'lost';  // çŠ¶æ€
  source?: string;               // æ¥æº
  coachId: string;               // æ‰€å±æ•™ç»ƒID
  createdAt: string;             // åˆ›å»ºæ—¶é—´
  updatedAt: string;             // æ›´æ–°æ—¶é—´
}
```

### 5. **è¯¾ç¨‹å¥—é¤æ•°æ®** (`packages`)
```typescript
{
  id: string;                    // å¥—é¤ID
  clientId: string;              // å®¢æˆ·ID
  coachId?: string;              // æ•™ç»ƒID
  startDate: string;             // å¼€å§‹æ—¥æœŸ
  validUntil: string;            // æœ‰æ•ˆæœŸè‡³
  totalSessions: number;         // æ€»è¯¾ç¨‹æ•°
  totalAmount: number;           // æ€»é‡‘é¢
  remainingSessions: number;     // å‰©ä½™è¯¾ç¨‹æ•°
  isExpired: boolean;            // æ˜¯å¦è¿‡æœŸ
  notes?: string;                // å¤‡æ³¨
  createdAt?: string;            // åˆ›å»ºæ—¶é—´
}
```

### 6. **è¯¾ç¨‹å®‰æ’æ•°æ®** (`schedules`)
```typescript
{
  id?: string;                   // è¯¾ç¨‹ID
  date: string;                  // è¯¾ç¨‹æ—¥æœŸ
  time: string;                  // æ—¶é—´(å…¼å®¹æ€§)
  startTime: string;             // å¼€å§‹æ—¶é—´
  endTime: string;               // ç»“æŸæ—¶é—´
  clientName: string;            // å®¢æˆ·å§“å
  clientId: string;              // å®¢æˆ·ID
  packageId?: string;            // å¥—é¤ID
  status: 'scheduled' | 'completed' | 'cancelled' | 'cancelled_with_deduction';  // çŠ¶æ€
  originalStatus?: string;       // åŸå§‹çŠ¶æ€
  hasBeenChanged: boolean;       // æ˜¯å¦å·²æ›´æ”¹
  coachId: string;               // æ•™ç»ƒID
  createdAt?: string;            // åˆ›å»ºæ—¶é—´
  updatedAt?: string;            // æ›´æ–°æ—¶é—´
}
```

### 7. **è¯¾ç¨‹è®°å½•æ•°æ®** (`lessonRecords`)
```typescript
{
  id?: string;                   // è®°å½•ID
  clientId: string;              // å®¢æˆ·ID
  clientName: string;            // å®¢æˆ·å§“å
  coachId: string;               // æ•™ç»ƒID
  lessonDate: string;            // è¯¾ç¨‹æ—¥æœŸ
  lessonTime: string;            // è¯¾ç¨‹æ—¶é—´
  duration: number;              // è¯¾ç¨‹æ—¶é•¿(åˆ†é’Ÿ)
  content: string;               // è¯¾ç¨‹å†…å®¹
  notes: string;                 // æ•™ç»ƒè®°å½•
  performance: string;           // å­¦å‘˜è¡¨ç°
  nextGoals: string;             // ä¸‹æ¬¡ç›®æ ‡
  attachments?: string[];        // é™„ä»¶
  createdAt: string;             // åˆ›å»ºæ—¶é—´
  updatedAt: string;             // æ›´æ–°æ—¶é—´
}
```

### 8. **è®­ç»ƒåŠ¨ä½œæ¨¡æ¿** (`exerciseTemplates`)
```typescript
{
  id: string;                    // æ¨¡æ¿ID
  coachId: string;               // æ•™ç»ƒID
  name: string;                  // åŠ¨ä½œåç§°
  category: 'upper_body' | 'lower_body' | 'core' | 'full_body' | 'cardio' | 'flexibility';  // åˆ†ç±»
  target: 'strength' | 'endurance' | 'flexibility' | 'coordination' | 'balance';  // ç›®æ ‡
  description: string;           // æè¿°
  sets: number;                  // ç»„æ•°
  reps: string;                  // æ¬¡æ•°
  weightRange?: string;          // é‡é‡èŒƒå›´
  restTime: string;              // ä¼‘æ¯æ—¶é—´
  notes?: string;                // å¤‡æ³¨
  isPublic: boolean;             // æ˜¯å¦å…¬å¼€
  createdAt: string;             // åˆ›å»ºæ—¶é—´
  updatedAt: string;             // æ›´æ–°æ—¶é—´
}
```

### 9. **å¥—é¤æ¨¡æ¿** (`packageTemplates`)
```typescript
{
  id: string;                    // æ¨¡æ¿ID
  coachId: string;               // æ•™ç»ƒID
  name: string;                  // å¥—é¤åç§°
  description: string;           // æè¿°
  totalSessions: number;         // æ€»è¯¾ç¨‹æ•°
  price: number;                 // ä»·æ ¼
  validityDays: number;          // æœ‰æ•ˆæœŸå¤©æ•°
  category: 'weight_loss' | 'muscle_gain' | 'rehabilitation' | 'fitness' | 'sports' | 'custom';  // åˆ†ç±»
  features: string[];            // ç‰¹è‰²åŠŸèƒ½
  notes?: string;                // å¤‡æ³¨
  isPublic: boolean;             // æ˜¯å¦å…¬å¼€
  createdAt: string;             // åˆ›å»ºæ—¶é—´
  updatedAt: string;             // æ›´æ–°æ—¶é—´
}
```

### 10. **è¯¾ç¨‹æ¨¡æ¿** (`lessonTemplates`)
```typescript
{
  id: string;                    // æ¨¡æ¿ID
  coachId: string;               // æ•™ç»ƒID
  name: string;                  // æ¨¡æ¿åç§°
  packageTemplateId?: string;    // å¥—é¤æ¨¡æ¿ID
  exercises: {                   // è®­ç»ƒåŠ¨ä½œ
    exerciseTemplateId: string;  // åŠ¨ä½œæ¨¡æ¿ID
    order: number;               // é¡ºåº
    customSets?: number;         // è‡ªå®šä¹‰ç»„æ•°
    customReps?: string;         // è‡ªå®šä¹‰æ¬¡æ•°
    customWeight?: string;       // è‡ªå®šä¹‰é‡é‡
    customNotes?: string;        // è‡ªå®šä¹‰å¤‡æ³¨
  }[];
  duration: number;              // è¯¾ç¨‹æ—¶é•¿
  difficulty: 'beginner' | 'intermediate' | 'advanced';  // éš¾åº¦
  notes?: string;                // å¤‡æ³¨
  isPublic: boolean;             // æ˜¯å¦å…¬å¼€
  createdAt: string;             // åˆ›å»ºæ—¶é—´
  updatedAt: string;             // æ›´æ–°æ—¶é—´
}
```

## ğŸ“± å„é¡µé¢æ•°æ®å±‚çº§

### ğŸ  **é¦–é¡µ** (`/`)
- **ç»Ÿè®¡æ•°æ®**ï¼š
  - æ€»å®¢æˆ·æ•°
  - æœ¬æœˆæ´»è·ƒå®¢æˆ·æ•°
  - æ€»è¯¾ç¨‹æ•°
  - æœ¬æœˆå®Œæˆè¯¾ç¨‹æ•°
  - æ€»å¥—é¤æ•°
  - æ½œåœ¨å®¢æˆ·æ•°

### ğŸ‘¤ **ä¸ªäººä¸»é¡µ** (`/profile`)
- **ä¸ªäººä¿¡æ¯**ï¼š
  - æ•™ç»ƒåŸºæœ¬ä¿¡æ¯
  - ä¸“ä¸šé¢†åŸŸ
  - ç»éªŒå¹´é™
  - ä¸ªäººç®€ä»‹
- **ç»Ÿè®¡æ•°æ®**ï¼š
  - å®¢æˆ·ç»Ÿè®¡
  - è¯¾ç¨‹ç»Ÿè®¡
  - å¥—é¤ç»Ÿè®¡
- **æ¨¡æ¿ç®¡ç†**ï¼š
  - è®­ç»ƒåŠ¨ä½œæ¨¡æ¿åˆ—è¡¨
  - å¥—é¤æ¨¡æ¿åˆ—è¡¨

### ğŸ‘¥ **å®¢æˆ·é¡µé¢** (`/clients`)
- **å®¢æˆ·åˆ—è¡¨**ï¼š
  - æ‰€æœ‰å®¢æˆ·åŸºæœ¬ä¿¡æ¯
  - å®¢æˆ·ç­›é€‰å’Œæœç´¢
- **å®¢æˆ·è¯¦æƒ…** (`/client/[id]`)ï¼š
  - å®¢æˆ·å®Œæ•´ä¿¡æ¯
  - å¥—é¤å†å²
  - è¯¾ç¨‹è®°å½•
  - è¯¾ç¨‹å®‰æ’

### ğŸ¯ **æ½œåœ¨å®¢æˆ·é¡µé¢** (`/prospects`)
- **æ½œåœ¨å®¢æˆ·åˆ—è¡¨**ï¼š
  - æ‰€æœ‰æ½œåœ¨å®¢æˆ·ä¿¡æ¯
  - çŠ¶æ€ç­›é€‰
  - æ¥æºåˆ†æ

### ğŸ“… **è¯¾ç¨‹å®‰æ’é¡µé¢** (`/schedule`)
- **è¯¾ç¨‹æ—¥å†**ï¼š
  - æŒ‰æ—¥æœŸæ˜¾ç¤ºçš„è¯¾ç¨‹
  - è¯¾ç¨‹çŠ¶æ€
  - å®¢æˆ·ä¿¡æ¯
- **ç»Ÿè®¡æ•°æ®**ï¼š
  - å½“å‰æœˆä»½è¯¾ç¨‹æ•°æ®
  - å½“å‰è§†å›¾è¯¾ç¨‹ç»Ÿè®¡

### ğŸ“ **è¯¾ç¨‹è®°å½•é¡µé¢** (`/lesson-records`)
- **è¯¾ç¨‹è®°å½•åˆ—è¡¨**ï¼š
  - æ‰€æœ‰è¯¾ç¨‹è®°å½•
  - æŒ‰å®¢æˆ·ç­›é€‰
  - æŒ‰æ—¥æœŸç­›é€‰
- **è¯¾ç¨‹è®°å½•è¯¦æƒ…**ï¼š
  - è¯¦ç»†è¯¾ç¨‹å†…å®¹
  - å­¦å‘˜è¡¨ç°
  - ä¸‹æ¬¡ç›®æ ‡

## ğŸ“ˆ å¯æå–çš„æ•°æ®åˆ†æç»´åº¦

### 1. **å®¢æˆ·åˆ†æ**
- å®¢æˆ·å¢é•¿è¶‹åŠ¿
- å®¢æˆ·å¹´é¾„åˆ†å¸ƒ
- å®¢æˆ·æ€§åˆ«æ¯”ä¾‹
- å®¢æˆ·å¥èº«ç›®æ ‡åˆ†å¸ƒ
- å®¢æˆ·è½¬åŒ–ç‡

### 2. **è¯¾ç¨‹åˆ†æ**
- è¯¾ç¨‹å®Œæˆç‡
- è¯¾ç¨‹å–æ¶ˆç‡
- è¯¾ç¨‹æ—¶é•¿åˆ†æ
- è¯¾ç¨‹ç±»å‹åˆ†å¸ƒ
- è¯¾ç¨‹æ—¶é—´åå¥½

### 3. **æ”¶å…¥åˆ†æ**
- å¥—é¤é”€å”®æƒ…å†µ
- æ”¶å…¥è¶‹åŠ¿
- å¥—é¤ç±»å‹åå¥½
- å®¢æˆ·ä»·å€¼åˆ†æ

### 4. **æ•™ç»ƒè¡¨ç°åˆ†æ**
- å®¢æˆ·æ»¡æ„åº¦
- è¯¾ç¨‹è´¨é‡
- å®¢æˆ·ç•™å­˜ç‡
- å·¥ä½œæ•ˆç‡

### 5. **æ¨¡æ¿ä½¿ç”¨åˆ†æ**
- æ¨¡æ¿ä½¿ç”¨é¢‘ç‡
- æ¨¡æ¿æ•ˆæœè¯„ä¼°
- æ¨¡æ¿ä¼˜åŒ–å»ºè®®

## ğŸ” æ•°æ®æŸ¥è¯¢ç¤ºä¾‹

### åŸºç¡€æŸ¥è¯¢
```javascript
// è·å–æ‰€æœ‰å®¢æˆ·
const clientsQuery = query(collection(db, "clients"), where("coachId", "==", user.uid));

// è·å–æ‰€æœ‰è¯¾ç¨‹å®‰æ’
const schedulesQuery = query(collection(db, "schedules"), where("coachId", "==", user.uid));

// è·å–æ‰€æœ‰å¥—é¤
const packagesQuery = query(collection(db, "packages"), where("coachId", "==", user.uid));

// è·å–æ‰€æœ‰è¯¾ç¨‹è®°å½•
const lessonRecordsQuery = query(collection(db, "lessonRecords"), where("coachId", "==", user.uid));

// è·å–æ‰€æœ‰æ½œåœ¨å®¢æˆ·
const prospectsQuery = query(collection(db, "prospects"), where("coachId", "==", user.uid));
```

### é«˜çº§æŸ¥è¯¢
```javascript
// è·å–æœ¬æœˆå®Œæˆçš„è¯¾ç¨‹
const currentMonth = new Date().getMonth() + 1;
const currentYear = new Date().getFullYear();
const completedSchedulesQuery = query(
  collection(db, "schedules"),
  where("coachId", "==", user.uid),
  where("status", "==", "completed"),
  where("date", ">=", `${currentYear}-${currentMonth.toString().padStart(2, '0')}-01`),
  where("date", "<=", `${currentYear}-${currentMonth.toString().padStart(2, '0')}-31`)
);

// è·å–å³å°†è¿‡æœŸçš„å¥—é¤
const today = new Date().toISOString().split('T')[0];
const expiringPackagesQuery = query(
  collection(db, "packages"),
  where("coachId", "==", user.uid),
  where("validUntil", ">=", today),
  where("isExpired", "==", false)
);

// è·å–ç‰¹å®šå®¢æˆ·çš„è¯¾ç¨‹è®°å½•
const clientLessonRecordsQuery = query(
  collection(db, "lessonRecords"),
  where("clientId", "==", clientId),
  orderBy("lessonDate", "desc")
);
```

## ğŸ“Š æ•°æ®å¯¼å‡ºæ ¼å¼å»ºè®®

### JSONæ ¼å¼
```json
{
  "exportDate": "2025-01-27T10:00:00Z",
  "coachId": "coach_uid",
  "data": {
    "clients": [...],
    "prospects": [...],
    "packages": [...],
    "schedules": [...],
    "lessonRecords": [...],
    "exerciseTemplates": [...],
    "packageTemplates": [...],
    "lessonTemplates": [...]
  }
}
```

### CSVæ ¼å¼
- clients.csv
- prospects.csv
- packages.csv
- schedules.csv
- lessonRecords.csv
- exerciseTemplates.csv
- packageTemplates.csv
- lessonTemplates.csv

## ğŸ¯ å…³é”®æŒ‡æ ‡ (KPIs)

### å®¢æˆ·ç›¸å…³
- æ€»å®¢æˆ·æ•°
- æ–°å¢å®¢æˆ·æ•°
- å®¢æˆ·ç•™å­˜ç‡
- å®¢æˆ·è½¬åŒ–ç‡
- å®¢æˆ·æ»¡æ„åº¦

### è¯¾ç¨‹ç›¸å…³
- è¯¾ç¨‹å®Œæˆç‡
- è¯¾ç¨‹å–æ¶ˆç‡
- å¹³å‡è¯¾ç¨‹æ—¶é•¿
- è¯¾ç¨‹å®‰æ’æ•ˆç‡

### æ”¶å…¥ç›¸å…³
- æ€»æ”¶å…¥
- å¹³å‡å¥—é¤ä»·æ ¼
- å¥—é¤é”€å”®æ•°é‡
- æ”¶å…¥å¢é•¿ç‡

### æ•™ç»ƒç›¸å…³
- å·¥ä½œæ•ˆç‡
- å®¢æˆ·ç®¡ç†èƒ½åŠ›
- è¯¾ç¨‹è´¨é‡è¯„åˆ†
- ä¸“ä¸šå‘å±•æŒ‡æ ‡

---

**æ³¨æ„**: æ­¤ç³»ç»Ÿæä¾›äº†éå¸¸å…¨é¢çš„æ•°æ®æ”¶é›†èƒ½åŠ›ï¼Œå¯ä»¥æ”¯æŒæ·±å…¥çš„ä¸šåŠ¡åˆ†æå’Œå†³ç­–æ”¯æŒã€‚æ‰€æœ‰æ•°æ®éƒ½å­˜å‚¨åœ¨Firebase Firestoreä¸­ï¼Œå¯ä»¥é€šè¿‡Firebase Admin SDKæˆ–å®¢æˆ·ç«¯SDKè¿›è¡Œè®¿é—®å’Œå¯¼å‡ºã€‚ 