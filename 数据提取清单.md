# 📊 健身教练客户管理系统 - 完整数据提取清单

## 🗄️ 数据库集合结构

### 1. **用户认证数据** (`auth`)
- **用户ID** (`uid`)
- **邮箱** (`email`)
- **显示名称** (`displayName`)
- **创建时间** (`createdAt`)

### 2. **教练信息** (`coaches`)
```typescript
{
  id: string;                    // 教练ID
  name: string;                  // 教练姓名
  email: string;                 // 邮箱
  phone?: string;                // 电话
  specialization?: string;       // 专业领域
  experience?: number;           // 经验年限
  bio?: string;                  // 个人简介
  avatar?: string;               // 头像URL
  createdAt: string;             // 创建时间
  updatedAt: string;             // 更新时间
}
```

### 3. **客户数据** (`clients`)
```typescript
{
  id: string;                    // 客户ID
  name: string;                  // 客户姓名
  phone: string;                 // 电话
  email: string;                 // 邮箱
  gender: string;                // 性别 (male/female/other)
  age: number;                   // 年龄
  height: number;                // 身高(cm)
  weight: number;                // 体重(kg)
  goal: string;                  // 健身目标
  notes?: string;                // 备注
  coachId: string;               // 所属教练ID
  createdAt: string;             // 创建时间
  updatedAt: string;             // 更新时间
}
```

### 4. **潜在客户数据** (`prospects`)
```typescript
{
  id: string;                    // 潜在客户ID
  name: string;                  // 姓名
  phone: string;                 // 电话
  email?: string;                // 邮箱
  gender: string;                // 性别
  age?: number;                  // 年龄
  height?: number;               // 身高
  weight?: number;               // 体重
  goal?: string;                 // 健身目标
  notes?: string;                // 备注
  status: 'new' | 'contacted' | 'interested' | 'converted' | 'lost';  // 状态
  source?: string;               // 来源
  coachId: string;               // 所属教练ID
  createdAt: string;             // 创建时间
  updatedAt: string;             // 更新时间
}
```

### 5. **课程套餐数据** (`packages`)
```typescript
{
  id: string;                    // 套餐ID
  clientId: string;              // 客户ID
  coachId?: string;              // 教练ID
  startDate: string;             // 开始日期
  validUntil: string;            // 有效期至
  totalSessions: number;         // 总课程数
  totalAmount: number;           // 总金额
  remainingSessions: number;     // 剩余课程数
  isExpired: boolean;            // 是否过期
  notes?: string;                // 备注
  createdAt?: string;            // 创建时间
}
```

### 6. **课程安排数据** (`schedules`)
```typescript
{
  id?: string;                   // 课程ID
  date: string;                  // 课程日期
  time: string;                  // 时间(兼容性)
  startTime: string;             // 开始时间
  endTime: string;               // 结束时间
  clientName: string;            // 客户姓名
  clientId: string;              // 客户ID
  packageId?: string;            // 套餐ID
  status: 'scheduled' | 'completed' | 'cancelled' | 'cancelled_with_deduction';  // 状态
  originalStatus?: string;       // 原始状态
  hasBeenChanged: boolean;       // 是否已更改
  coachId: string;               // 教练ID
  createdAt?: string;            // 创建时间
  updatedAt?: string;            // 更新时间
}
```

### 7. **课程记录数据** (`lessonRecords`)
```typescript
{
  id?: string;                   // 记录ID
  clientId: string;              // 客户ID
  clientName: string;            // 客户姓名
  coachId: string;               // 教练ID
  lessonDate: string;            // 课程日期
  lessonTime: string;            // 课程时间
  duration: number;              // 课程时长(分钟)
  content: string;               // 课程内容
  notes: string;                 // 教练记录
  performance: string;           // 学员表现
  nextGoals: string;             // 下次目标
  attachments?: string[];        // 附件
  createdAt: string;             // 创建时间
  updatedAt: string;             // 更新时间
}
```

### 8. **训练动作模板** (`exerciseTemplates`)
```typescript
{
  id: string;                    // 模板ID
  coachId: string;               // 教练ID
  name: string;                  // 动作名称
  category: 'upper_body' | 'lower_body' | 'core' | 'full_body' | 'cardio' | 'flexibility';  // 分类
  target: 'strength' | 'endurance' | 'flexibility' | 'coordination' | 'balance';  // 目标
  description: string;           // 描述
  sets: number;                  // 组数
  reps: string;                  // 次数
  weightRange?: string;          // 重量范围
  restTime: string;              // 休息时间
  notes?: string;                // 备注
  isPublic: boolean;             // 是否公开
  createdAt: string;             // 创建时间
  updatedAt: string;             // 更新时间
}
```

### 9. **套餐模板** (`packageTemplates`)
```typescript
{
  id: string;                    // 模板ID
  coachId: string;               // 教练ID
  name: string;                  // 套餐名称
  description: string;           // 描述
  totalSessions: number;         // 总课程数
  price: number;                 // 价格
  validityDays: number;          // 有效期天数
  category: 'weight_loss' | 'muscle_gain' | 'rehabilitation' | 'fitness' | 'sports' | 'custom';  // 分类
  features: string[];            // 特色功能
  notes?: string;                // 备注
  isPublic: boolean;             // 是否公开
  createdAt: string;             // 创建时间
  updatedAt: string;             // 更新时间
}
```

### 10. **课程模板** (`lessonTemplates`)
```typescript
{
  id: string;                    // 模板ID
  coachId: string;               // 教练ID
  name: string;                  // 模板名称
  packageTemplateId?: string;    // 套餐模板ID
  exercises: {                   // 训练动作
    exerciseTemplateId: string;  // 动作模板ID
    order: number;               // 顺序
    customSets?: number;         // 自定义组数
    customReps?: string;         // 自定义次数
    customWeight?: string;       // 自定义重量
    customNotes?: string;        // 自定义备注
  }[];
  duration: number;              // 课程时长
  difficulty: 'beginner' | 'intermediate' | 'advanced';  // 难度
  notes?: string;                // 备注
  isPublic: boolean;             // 是否公开
  createdAt: string;             // 创建时间
  updatedAt: string;             // 更新时间
}
```

## 📱 各页面数据层级

### 🏠 **首页** (`/`)
- **统计数据**：
  - 总客户数
  - 本月活跃客户数
  - 总课程数
  - 本月完成课程数
  - 总套餐数
  - 潜在客户数

### 👤 **个人主页** (`/profile`)
- **个人信息**：
  - 教练基本信息
  - 专业领域
  - 经验年限
  - 个人简介
- **统计数据**：
  - 客户统计
  - 课程统计
  - 套餐统计
- **模板管理**：
  - 训练动作模板列表
  - 套餐模板列表

### 👥 **客户页面** (`/clients`)
- **客户列表**：
  - 所有客户基本信息
  - 客户筛选和搜索
- **客户详情** (`/client/[id]`)：
  - 客户完整信息
  - 套餐历史
  - 课程记录
  - 课程安排

### 🎯 **潜在客户页面** (`/prospects`)
- **潜在客户列表**：
  - 所有潜在客户信息
  - 状态筛选
  - 来源分析

### 📅 **课程安排页面** (`/schedule`)
- **课程日历**：
  - 按日期显示的课程
  - 课程状态
  - 客户信息
- **统计数据**：
  - 当前月份课程数据
  - 当前视图课程统计

### 📝 **课程记录页面** (`/lesson-records`)
- **课程记录列表**：
  - 所有课程记录
  - 按客户筛选
  - 按日期筛选
- **课程记录详情**：
  - 详细课程内容
  - 学员表现
  - 下次目标

## 📈 可提取的数据分析维度

### 1. **客户分析**
- 客户增长趋势
- 客户年龄分布
- 客户性别比例
- 客户健身目标分布
- 客户转化率

### 2. **课程分析**
- 课程完成率
- 课程取消率
- 课程时长分析
- 课程类型分布
- 课程时间偏好

### 3. **收入分析**
- 套餐销售情况
- 收入趋势
- 套餐类型偏好
- 客户价值分析

### 4. **教练表现分析**
- 客户满意度
- 课程质量
- 客户留存率
- 工作效率

### 5. **模板使用分析**
- 模板使用频率
- 模板效果评估
- 模板优化建议

## 🔍 数据查询示例

### 基础查询
```javascript
// 获取所有客户
const clientsQuery = query(collection(db, "clients"), where("coachId", "==", user.uid));

// 获取所有课程安排
const schedulesQuery = query(collection(db, "schedules"), where("coachId", "==", user.uid));

// 获取所有套餐
const packagesQuery = query(collection(db, "packages"), where("coachId", "==", user.uid));

// 获取所有课程记录
const lessonRecordsQuery = query(collection(db, "lessonRecords"), where("coachId", "==", user.uid));

// 获取所有潜在客户
const prospectsQuery = query(collection(db, "prospects"), where("coachId", "==", user.uid));
```

### 高级查询
```javascript
// 获取本月完成的课程
const currentMonth = new Date().getMonth() + 1;
const currentYear = new Date().getFullYear();
const completedSchedulesQuery = query(
  collection(db, "schedules"),
  where("coachId", "==", user.uid),
  where("status", "==", "completed"),
  where("date", ">=", `${currentYear}-${currentMonth.toString().padStart(2, '0')}-01`),
  where("date", "<=", `${currentYear}-${currentMonth.toString().padStart(2, '0')}-31`)
);

// 获取即将过期的套餐
const today = new Date().toISOString().split('T')[0];
const expiringPackagesQuery = query(
  collection(db, "packages"),
  where("coachId", "==", user.uid),
  where("validUntil", ">=", today),
  where("isExpired", "==", false)
);

// 获取特定客户的课程记录
const clientLessonRecordsQuery = query(
  collection(db, "lessonRecords"),
  where("clientId", "==", clientId),
  orderBy("lessonDate", "desc")
);
```

## 📊 数据导出格式建议

### JSON格式
```json
{
  "exportDate": "2025-01-27T10:00:00Z",
  "coachId": "coach_uid",
  "data": {
    "clients": [...],
    "prospects": [...],
    "packages": [...],
    "schedules": [...],
    "lessonRecords": [...],
    "exerciseTemplates": [...],
    "packageTemplates": [...],
    "lessonTemplates": [...]
  }
}
```

### CSV格式
- clients.csv
- prospects.csv
- packages.csv
- schedules.csv
- lessonRecords.csv
- exerciseTemplates.csv
- packageTemplates.csv
- lessonTemplates.csv

## 🎯 关键指标 (KPIs)

### 客户相关
- 总客户数
- 新增客户数
- 客户留存率
- 客户转化率
- 客户满意度

### 课程相关
- 课程完成率
- 课程取消率
- 平均课程时长
- 课程安排效率

### 收入相关
- 总收入
- 平均套餐价格
- 套餐销售数量
- 收入增长率

### 教练相关
- 工作效率
- 客户管理能力
- 课程质量评分
- 专业发展指标

---

**注意**: 此系统提供了非常全面的数据收集能力，可以支持深入的业务分析和决策支持。所有数据都存储在Firebase Firestore中，可以通过Firebase Admin SDK或客户端SDK进行访问和导出。 